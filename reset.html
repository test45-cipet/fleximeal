<!doctype html>
<html lang="en">
<head>
  <meta charset="utf-8">
  <meta name="viewport" content="width=device-width,initial-scale=1">
  <title>Reset Password â€” FlexiMeal</title>
  <link rel="stylesheet" href="style.css">
</head>
<body>
  <main class="page">
    <h2>Reset Password</h2>
    <p>Set a new password for your account.</p>
    <input id="pwd" type="password" minlength="6" placeholder="New password">
    <button id="btn">Update</button>
    <div id="msg" style="margin-top:8px"></div>
  </main>
<script>
const SCRIPT_URL = 'https://script.google.com/macros/s/YOUR_DEPLOY_ID/exec';
const params = new URLSearchParams(location.search);
const token = params.get('token');

document.getElementById('btn').onclick = async ()=>{
  const password = document.getElementById('pwd').value.trim();
  if(password.length<6){ document.getElementById('msg').innerText='Password must be at least 6 characters.'; return }
  const res = await fetch(SCRIPT_URL,{method:'POST',headers:{'Content-Type':'application/json'},body:JSON.stringify({action:'consumeReset', token, password})});
  const j = await res.json();
  document.getElementById('msg').innerText = j.message;
}
</script>
</body>
</html>